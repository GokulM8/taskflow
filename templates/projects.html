{% extends "base.html" %}

{% block title %}Projects | TaskFlow{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/projects.css') }}">
{% endblock %}

{% block content %}

<!-- ================= PROJECTS HEADER + CREATE FORM ================= -->
<section class="projects-header">
    <h1>Projects</h1>
    <p class="subtitle">Manage and track all your projects</p>

    <form method="POST" action="{{ url_for('create_project') }}" class="create-project-form">
        <input
            type="text"
            name="title"
            placeholder="Project title"
            required
        >

        <textarea
            name="description"
            placeholder="Project description (optional)">
        </textarea>

        <button type="submit" class="primary-btn">
            Create Project
        </button>
    </form>
</section>

<!-- ================= PROJECTS GRID ================= -->
<section class="projects-grid">

    {% if projects %}
        {% for project in projects %}
            <div class="project-card">

                <div class="project-header">
                    <div class="project-text">
                        <h3 class="project-title">{{ project.title }}</h3>
                        <p class="project-desc">
                            {{ project.description if project.description else "No description provided." }}
                        </p>
                    </div>

                    <span class="project-status {{ project.status }}">
                        {{ project.status.replace('_',' ').title() }}
                    </span>
                </div>

                <div class="project-meta">
                    <span>Tasks: {{ project.task_count }}</span>
                    <span>Created: {{ project.created_at.split(' ')[0] }}</span>
                </div>

                <div class="project-actions">
                    <!-- âœ… OPEN PROJECT DASHBOARD -->
                    <a href="{{ url_for('project_dashboard', project_id=project.id) }}"
                       class="link-btn">
                        Open
                    </a>
                </div>

            </div>
        {% endfor %}
    {% else %}
        <p class="empty-text">No projects created yet.</p>
    {% endif %}

</section>

{% endblock %}
